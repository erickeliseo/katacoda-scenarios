### Prometheus Operator + Grafana Dashboards
Instalando Prometheus:
```
~/files/install-prometheus.sh
```{{execute T1}}

Creando una Variable de ambiente para establecer la conexion Grafana/Prometheus:
```
export URL=https://[[HOST_SUBDOMAIN]]-30900-[[KATACODA_HOST]].environments.katacoda.com/
echo -e "\u001b[32mURL de Prometehus $URL\u001b[m\r\n"
```{{execute T1}}

Establecer la conexion Grafana/Prometheus:
```
sed -i "s|url:|url: $URL|g" ~/files/grafana-helm-values.yaml
```{{execute T1}}

Habilitando acceso a Grafana desde el Exterior:
```
kubectl create -f ~/files/grafana-external-NodePort.yaml
```{{execute T1}}

Instalando Grafana
```
helm install --name grafana-rook-cluster stable/grafana -f ~/files/grafana-helm-values.yaml
```{{execute T1}}

Verificar que este listo Grafana:
```
kubectl get pods | grep grafana-rook-cluster | awk '{print $3}'
```{{execute T1}}

Creando variable de ambiente para el POD:
```
export PODGRAFANA=$(kubectl get pods | grep grafana-rook-cluster | awk '{print $1}')
echo -e "\u001b[32mPODGRAFANA = $PODGRAFANA\u001b[m\r\n"
```{{execute T1}}

#Instalando Dashboards
```
kubectl cp ~/files/grafana-dashboard-Ceph-Cluster-2842.json $PODGRAFANA:tmp/
```{{execute T1}}

```
kubectl exec -it $PODGRAFANA -- bash -c "cd /tmp ; curl --user admin:strongpassword 'http://localhost:3000/api/dashboards/db' -X POST -H 'Content-Type:application/json;charset=UTF-8' --data-binary @./grafana-dashboard-Ceph-Cluster-2842.json"
```{{execute T1}}

Ingresar a Grafana Dashboard: https://[[HOST_SUBDOMAIN]]-30600-[[KATACODA_HOST]].environments.katacoda.com/

### Ceph Dashboard
Ingresar a CEPH Dashboard: https://[[HOST_SUBDOMAIN]]-30700-[[KATACODA_HOST]].environments.katacoda.com/
